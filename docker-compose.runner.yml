services:
  github-runner:
    image: myoung34/github-runner:latest
    restart: unless-stopped
    environment:
      - REPO_URL=https://github.com/${GITHUB_REPO}
      - RUNNER_TOKEN=${GITHUB_RUNNER_TOKEN}
      - RUNNER_NAME=${GITHUB_RUNNER_NAME:-fitness-copilot-runner}
      - RUNNER_LABELS=${GITHUB_RUNNER_LABELS:-self-hosted,staging,production}
      - RUNNER_WORKDIR=/tmp/runner/work
      - DOCKER_ENABLED=true
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - runner-work:/tmp/runner/work
    labels:
      - "com.centurylinklabs.watchtower.enable=false"

volumes:
  runner-work:
